# 环境监测平台 - 使用说明

## ⚠️ 重要提示

**不能直接双击打开 `index.html` 文件！** 这是一个使用 Vite 构建的现代前端项目，需要通过命令行启动开发服务器。

## 🚀 快速开始

### 第一步：安装 Node.js

确保你的电脑已安装 Node.js（版本 16 或更高）

检查是否已安装：
```bash
node --version
npm --version
```

如果未安装，请访问 https://nodejs.org/ 下载安装

### 第二步：安装项目依赖

在项目根目录（`web` 文件夹）打开终端/命令行，运行：

```bash
npm install
```

这会安装所有必需的依赖包（React、Vite、Tailwind CSS 等）

### 第三步：启动开发服务器

安装完成后，运行：

```bash
npm run dev
```

你会看到类似这样的输出：
```
  VITE v5.0.8  ready in 500 ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 第四步：打开浏览器

在浏览器中访问：**http://localhost:5173**

现在你应该能看到环境监测平台的界面了！

## 📝 常用命令

```bash
# 启动开发服务器（开发模式）
npm run dev

# 构建生产版本
npm run build

# 预览生产构建
npm run preview

# 代码检查
npm run lint
```

## 🔧 如果遇到问题

### 问题1：`npm install` 失败
- 检查网络连接
- 尝试使用国内镜像：`npm install --registry=https://registry.npmmirror.com`

### 问题2：端口 5173 被占用
- Vite 会自动尝试其他端口（如 5174）
- 或手动指定端口：修改 `vite.config.ts` 添加 `server: { port: 3000 }`

### 问题3：页面空白
- 检查浏览器控制台是否有错误（按 F12）
- 确保所有依赖都已正确安装
- 尝试删除 `node_modules` 文件夹，然后重新运行 `npm install`

## 📦 项目结构说明

```
web/
├── src/              # 源代码目录
│   ├── components/   # 组件
│   ├── pages/        # 页面
│   ├── services/     # 数据服务
│   └── types/        # 类型定义
├── index.html        # HTML 模板（不能直接打开）
├── package.json      # 项目配置和依赖
└── vite.config.ts    # Vite 配置
```

## 💡 开发提示

- 修改代码后，页面会自动热更新（Hot Module Replacement）
- 所有代码都在 `src/` 目录下
- 样式使用 Tailwind CSS，可以直接在 className 中使用工具类

## 🌐 部署到生产环境

1. 运行 `npm run build` 构建项目
2. 构建产物在 `dist/` 目录
3. 将 `dist/` 目录部署到 Web 服务器（如 Nginx、Apache 等）

## 🛰️ 配置高德卫星地图（可选，但推荐）

1. 前往 [高德开放平台](https://console.amap.com/)，注册/登录开发者账号。
2. 在「应用管理」中新建 Web 应用，记下生成的 **Key**（Web 服务类型）。
3. 在项目根目录创建 `.env.local`（若已存在则复用），写入：
   ```
   VITE_AMAP_KEY=你的高德Key
   ```
4. 重新启动 `npm run dev`。若配置成功，地图将自动切换为高德卫星底图并叠加路网标注。
5. 免费额度每日约 5 万次瓦片请求，足够大多数内部系统使用；超过额度可在高德控制台升级。

